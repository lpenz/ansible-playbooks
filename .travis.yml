language: generic
jobs:
  include:
    - name: omnilint
      install: docker pull lpenz/omnilint
      script: docker run --rm -u "$UID" -v "$PWD:$PWD" -w "$PWD" lpenz/omnilint
    - name: ansible-playbook
      install: docker build -t ansible-playbooks:latest .
      script: docker run -it --rm -v $PWD:/home/user/work -e MY_UID=$UID ansible-playbooks
    - name: ansible-playbook --check
      install: docker build -t ansible-playbooks:latest .
      script: docker run -it --rm -v $PWD:/home/user/work -e MY_UID=$UID ansible-playbooks ansible-playbook playbook-all.yml --check
